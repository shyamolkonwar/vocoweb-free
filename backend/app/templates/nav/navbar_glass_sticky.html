<!-- Navbar_Glass_Sticky -->
<!-- A floating strip with frosted glass effect (backdrop-blur) -->
<!-- Logo left, links center, "Book Now" pill-button right -->
<!-- Variables: business_name, logo_url, primary_color, accent_color, pages, phone, cta_text -->

<nav id="main-nav" class="fixed top-4 left-1/2 -translate-x-1/2 z-50 w-[95%] max-w-6xl">
    <div
        class="relative px-6 py-3 rounded-2xl bg-white/70 backdrop-blur-xl border border-white/20 shadow-lg shadow-black/5">
        <div class="flex items-center justify-between">
            <!-- Logo (Left) -->
            <a href="index.html" class="flex items-center gap-2 flex-shrink-0">
                {% if logo_url %}
                <img src="{{ logo_url }}" alt="{{ business_name }}" class="h-8 w-auto">
                {% else %}
                <span class="text-xl font-bold" style="color: {{ primary_color }};">
                    {{ business_name }}
                </span>
                {% endif %}
            </a>

            <!-- Desktop Navigation Links (Center) -->
            <div class="hidden md:flex items-center justify-center gap-8 absolute left-1/2 -translate-x-1/2">
                {% for page in pages %}
                <a href="{{ page.url }}"
                    class="text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors relative group">
                    {{ page.label }}
                    <span
                        class="absolute -bottom-1 left-0 w-0 h-0.5 group-hover:w-full transition-all duration-300 rounded-full"
                        style="background: {{ primary_color }};"></span>
                </a>
                {% endfor %}
            </div>

            <!-- CTA Button (Right) -->
            <div class="hidden md:flex items-center gap-4">
                {% if phone %}
                <a href="tel:{{ phone }}"
                    class="inline-flex items-center gap-2 px-5 py-2.5 rounded-full font-semibold text-sm text-white transition-all duration-300 hover:shadow-lg hover:scale-105"
                    style="background: {{ primary_color }};">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                    </svg>
                    {{ cta_text | default("Book Now") }}
                </a>
                {% else %}
                <a href="#contact"
                    class="inline-flex items-center gap-2 px-5 py-2.5 rounded-full font-semibold text-sm text-white transition-all duration-300 hover:shadow-lg hover:scale-105"
                    style="background: {{ primary_color }};">
                    {{ cta_text | default("Book Now") }}
                </a>
                {% endif %}
            </div>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn" onclick="toggleMobileMenu()"
                class="md:hidden w-10 h-10 rounded-xl flex items-center justify-center hover:bg-gray-100 transition-colors">
                <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </div>
    </div>
</nav>

<!-- Mobile Menu Dropdown (hidden by default) -->
<div id="mobile-menu" class="fixed top-20 left-1/2 -translate-x-1/2 z-40 w-[95%] max-w-6xl hidden">
    <div id="mobile-menu-panel"
        class="rounded-2xl shadow-2xl overflow-hidden opacity-0 transform -translate-y-4 transition-all duration-300"
        style="background: {{ primary_color | default('#0a0a0a') }};">
        <div class="p-6">
            <nav class="space-y-2">
                {% for page in pages %}
                <a href="{{ page.url }}" onclick="toggleMobileMenu()"
                    class="block text-lg font-medium text-white/90 hover:text-white hover:bg-white/10 py-3 px-4 rounded-xl transition-colors">
                    {{ page.label }}
                </a>
                {% endfor %}
            </nav>
            <div class="mt-4 pt-4 border-t border-white/20">
                <a href="#contact" onclick="toggleMobileMenu()"
                    class="w-full inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-semibold bg-white text-gray-900 hover:bg-gray-100 transition-colors">
                    {{ cta_text | default("Book Now") }}
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    function toggleMobileMenu() {
        const menu = document.getElementById('mobile-menu');
        const panel = document.getElementById('mobile-menu-panel');
        if (menu.classList.contains('hidden')) {
            menu.classList.remove('hidden');
            // Trigger animation after display
            setTimeout(() => {
                panel.classList.remove('opacity-0', '-translate-y-4');
                panel.classList.add('opacity-100', 'translate-y-0');
            }, 10);
        } else {
            panel.classList.remove('opacity-100', 'translate-y-0');
            panel.classList.add('opacity-0', '-translate-y-4');
            setTimeout(() => {
                menu.classList.add('hidden');
            }, 300);
        }
    }

    // Close menu when clicking outside
    document.addEventListener('click', function (e) {
        const menu = document.getElementById('mobile-menu');
        const menuBtn = document.getElementById('mobile-menu-btn');
        if (!menu.classList.contains('hidden') &&
            !menu.contains(e.target) &&
            !menuBtn.contains(e.target)) {
            toggleMobileMenu();
        }
    });
</script>